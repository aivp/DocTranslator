import{b as V,c as x}from"./index-Bp8r6N_T.js";import{E as m}from"./element-C0HbadzC.js";import{l as y,r as d,d as k,ah as i,ap as w,m as c,p as q,P as C,M as D,O as o,U as a,S as E}from"./vue-DSQ7aDT9.js";import{_ as S}from"./index-Dkx2t_xt.js";import"./vxe-D9jD_6gD.js";const U={class:"app-container"},B=y({name:"接口配置",__name:"other",setup(M){const u=d(!1),e=d({prompt:"",threads:"",email_limit:""}),_=d(null),f={prompt:[{required:!0,message:"请填写默认提示语",trigger:"blur"}],threads:[{required:!0,message:"请填写默认线程数",trigger:"blur"}]};k(async()=>{u.value=!0,await V().then(r=>{e.value=r.data}),u.value=!1});function v(r){e.value,e.value.prompt,e.value.threads,e.value.email_limit,r==null||r.validate((l,s)=>{if(e.value,l)x({prompt:e.value.prompt,threads:e.value.threads,email_limit:e.value.email_limit}).then(t=>{t.code==200?m.success("保存成功"):m.error(t.message)}).catch(t=>{m.error(t)});else for(const t in s){s[t].forEach(p=>{m({message:p.message,type:"error"})});break}})}return(r,l)=>{const s=i("el-input"),t=i("el-form-item"),p=i("el-button"),g=i("el-form"),h=i("el-card"),b=w("loading");return c(),q("div",U,[C((c(),D(h,{shadow:"never","element-loading-text":"加载中..."},{default:o(()=>[a(g,{class:"settingForm",ref_key:"settingForm",ref:_,model:e.value,"label-position":"top",rules:f},{default:o(()=>[a(t,{label:"默认提示语",required:"",prop:"prompt"},{default:o(()=>[a(s,{type:"textarea",resize:"none",rows:5,modelValue:e.value.prompt,"onUpdate:modelValue":l[0]||(l[0]=n=>e.value.prompt=n)},null,8,["modelValue"])]),_:1}),a(t,{label:"默认线程数",required:"",prop:"threads"},{default:o(()=>[a(s,{modelValue:e.value.threads,"onUpdate:modelValue":l[1]||(l[1]=n=>e.value.threads=n)},null,8,["modelValue"])]),_:1}),a(t,{label:"限定注册邮箱后缀",prop:"email_limit"},{default:o(()=>[a(s,{modelValue:e.value.email_limit,"onUpdate:modelValue":l[2]||(l[2]=n=>e.value.email_limit=n),placeholder:"多个用逗号隔开,完全匹配域名"},null,8,["modelValue"])]),_:1}),a(t,{class:"setting-btns"},{default:o(()=>[a(p,{style:{width:"88px"},type:"primary",onClick:l[3]||(l[3]=n=>v(_.value))},{default:o(()=>[E("保存其他设置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["element-loading-text"])),[[b,u.value]])])}}}),T=S(B,[["__scopeId","data-v-555b1659"]]);export{T as default};
