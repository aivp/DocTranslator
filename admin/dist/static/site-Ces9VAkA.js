import{d as E}from"./index-Bp8r6N_T.js";import{u as U}from"./system-cUdnSvtt.js";import{_ as I}from"./index-Dkx2t_xt.js";import{E as p}from"./element-C0HbadzC.js";import{r as _,d as D,ah as s,m as G,p as L,U as t,O as o,q as v,S as O,aE as P,aF as W}from"./vue-DSQ7aDT9.js";import"./vxe-D9jD_6gD.js";const k=r=>(P("data-v-2ac1bb3e"),r=r(),W(),r),B={class:"app-container"},C={class:"form-tip"},F=k(()=>v("span",null,"必须使用https链接（如：https://example.com/logo.png）",-1)),N={__name:"site",setup(r){const m=U(),e=_({admin_site_title:"",site_logo:"",site_name:"",site_title:"",version:"",update_time:null}),c=_(null),d=_(!1),g={version:[{required:!0,message:"请选择版本",trigger:"blur"}],site_title:[{required:!1,message:"请输入站点标题",trigger:"blur"}]},b=()=>e.value.site_logo?e.value.site_logo.startsWith("https://")?[".jpg",".jpeg",".png",".webp",".gif"].some(n=>e.value.site_logo.toLowerCase().endsWith(n))?!0:(p.error("仅支持JPG/PNG/WEBP/GIF格式的图片链接"),!1):(p.error("LOGO必须使用HTTPS协议，请修改后重试"),!1):!0,V=async()=>{var u;try{if(await((u=c.value)==null?void 0:u.validate()),!b())return;d.value=!0,e.value.update_time=Date.now().toString();const{code:l}=await E(e.value);l===200&&(m.updateSiteSettings(e.value),p.success("配置保存成功"),setTimeout(()=>location.reload(),800))}catch(l){console.error("保存失败:",l)}finally{d.value=!1}};return D(()=>{e.value=m.site_settings}),(u,l)=>{const n=s("el-input"),S=s("Warning"),h=s("el-icon"),i=s("el-form-item"),f=s("el-option"),w=s("el-select"),x=s("el-button"),y=s("el-form"),T=s("el-card");return G(),L("div",B,[t(T,{shadow:"never"},{default:o(()=>[t(y,{ref_key:"settingForm",ref:c,model:e.value,rules:g,"label-width":"120px","label-position":"top"},{default:o(()=>[t(i,{label:"站点LOGO地址：",prop:"site_logo"},{default:o(()=>[t(n,{modelValue:e.value.site_logo,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value.site_logo=a),placeholder:"必须输入HTTPS开头的图片URL",clearable:""},null,8,["modelValue"]),v("div",C,[t(h,null,{default:o(()=>[t(S)]),_:1}),F])]),_:1}),t(i,{label:"用户端站点标题：",prop:"site_title"},{default:o(()=>[t(n,{modelValue:e.value.site_title,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.site_title=a),placeholder:"比如：DocTranslator 开源AI文档翻译"},null,8,["modelValue"])]),_:1}),t(i,{label:"站点名称：",prop:"site_name"},{default:o(()=>[t(n,{modelValue:e.value.site_name,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.site_name=a),placeholder:"比如：DocTranslator"},null,8,["modelValue"])]),_:1}),t(i,{label:"管理端站点标题：",prop:"admin_site_title"},{default:o(()=>[t(n,{modelValue:e.value.admin_site_title,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.admin_site_title=a),placeholder:"比如：DocTranslator后台管理中心"},null,8,["modelValue"])]),_:1}),t(i,{label:"系统版本：",prop:"version"},{default:o(()=>[t(w,{modelValue:e.value.version,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.version=a),placeholder:"请选择版本"},{default:o(()=>[t(f,{value:"community",label:"个人版"}),t(f,{value:"business",label:"企业版"})]),_:1},8,["modelValue"])]),_:1}),t(i,null,{default:o(()=>[t(x,{type:"primary",onClick:V,loading:d.value},{default:o(()=>[O("保存站点设置")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])}}},R=I(N,[["__scopeId","data-v-2ac1bb3e"]]);export{R as default};
