import{_ as B,y as J,z as Z,e as C,h as s,o as b,c as w,a as l,t as $,k,v as D,x as m,l as F,A as ee,m as A,w as t,B as te,r as I,j as e,C as ae,d as H,u as R,f as N,F as h,D as le,G as oe,E as L,H as se,s as ne,I as j,J as E,K as re,n as P,L as q}from"./index-CwiaCLCA.js";/* empty css                                                               */import{f as Q}from"./tools-TptFQl-U.js";import{h as ie}from"./trans-DWIHjxiR.js";const ue={class:"basic-info"},de={class:"info-row"},_e={class:"info-content"},pe={class:"info-row"},ce={class:"info-content"},me={key:0,src:te,class:"vip-icon"},ve={class:"info-row"},fe={class:"info-content"},ge={class:"info-row"},be={class:"storage-display"},ye={class:"storage-bar"},ke={class:"storage-details"},Ie={class:"storage-text"},Se={class:"storage-percent"},we={__name:"BasicInfo",props:{userInfo:{type:Object,required:!0,default:()=>({email:"",level:"",storage:0,create_at:""})}},setup(y){const v=J(),g=y,{userInfo:a}=Z(g),o=C(()=>a.value.total_storage||1073741824),n=C(()=>{const _=a.value.storage/o.value*100;return Math.min(100,parseFloat(_.toFixed(2)))}),p=C(()=>(a.value.storage/1048576).toFixed(2)+" MB"),i=C(()=>{const _=o.value/1073741824;return _>=1?_.toFixed(1)+" GB":(o.value/1048576).toFixed(0)+" MB"}),c=()=>{v.push("/upgrade")};return(_,f)=>{const r=s("el-button");return b(),w("div",ue,[l("div",de,[f[0]||(f[0]=l("span",{class:"info-label"},"邮箱账号：",-1)),l("span",_e,$(k(a).email||"-"),1)]),l("div",pe,[f[1]||(f[1]=l("span",{class:"info-label"},"账户类型：",-1)),l("span",ce,[l("span",{class:D(["user-level",{vip:k(a).level==="vip"}])},[m($(k(a).level==="vip"?"VIP会员":"普通用户")+" ",1),k(a).level==="vip"?(b(),w("img",me)):F("",!0)],2)])]),l("div",ve,[f[2]||(f[2]=l("span",{class:"info-label"},"注册时间：",-1)),l("span",fe,$(k(Q)(k(a).created_at)||"-"),1)]),l("div",ge,[f[4]||(f[4]=l("span",{class:"info-label"},"存储空间：",-1)),l("div",be,[l("div",ye,[l("div",{class:D(["storage-used",{warning:n.value>80}]),style:ee({width:n.value+"%"})},null,6)]),l("div",ke,[l("span",Ie,$(p.value)+" / "+$(i.value),1),l("span",Se,$(n.value)+"%",1),k(a).level!=="vip"?(b(),A(r,{key:0,type:"text",size:"small",class:"upgrade-btn",onClick:c},{default:t(()=>f[3]||(f[3]=[m(" 扩容空间 ",-1)])),_:1,__:[3]})):F("",!0)])])])])}}},Ve=B(we,[["__scopeId","data-v-0944e4fc"]]),$e={class:"security-settings"},xe={class:"email-display"},Ce={class:"security-tips"},Be={class:"code-input"},Fe={__name:"SecuritySettings",props:{email:{type:String,required:!0}},setup(y){const v=I(!1),g=I({email:"",code:""}),a=I(0),o=()=>{a.value=60;const p=setInterval(()=>{a.value--,a.value<=0&&clearInterval(p)},1e3)},n=()=>{emit("bind-email",g.value.email),v.value=!1};return(p,i)=>{const c=s("el-button"),_=s("el-form-item"),f=s("el-icon"),r=s("el-form"),d=s("el-input"),V=s("el-dialog");return b(),w("div",$e,[e(r,null,{default:t(()=>[e(_,{label:"登录邮箱:"},{default:t(()=>[l("div",xe,[m($(y.email)+" ",1),e(c,{type:"text"},{default:t(()=>i[5]||(i[5]=[m("更换邮箱",-1)])),_:1,__:[5]})])]),_:1}),e(_,{label:"登录密码:"},{default:t(()=>[e(c,{onClick:i[0]||(i[0]=S=>p.$router.push("/reset"))},{default:t(()=>i[6]||(i[6]=[m("修改密码",-1)])),_:1,__:[6]})]),_:1}),e(_,{label:"账号安全:"},{default:t(()=>[l("div",Ce,[e(f,null,{default:t(()=>[e(k(ae))]),_:1}),i[7]||(i[7]=l("span",null,"请妥善保管您的账号信息，不要泄露给他人",-1))])]),_:1})]),_:1}),e(V,{modelValue:v.value,"onUpdate:modelValue":i[4]||(i[4]=S=>v.value=S),title:"绑定新邮箱",width:"400px"},{footer:t(()=>[e(c,{onClick:i[3]||(i[3]=S=>v.value=!1)},{default:t(()=>i[8]||(i[8]=[m("取消",-1)])),_:1,__:[8]}),e(c,{type:"primary",onClick:n},{default:t(()=>i[9]||(i[9]=[m("确认绑定",-1)])),_:1,__:[9]})]),default:t(()=>[e(r,{model:g.value,"label-width":"80px"},{default:t(()=>[e(_,{label:"新邮箱",prop:"email"},{default:t(()=>[e(d,{modelValue:g.value.email,"onUpdate:modelValue":i[1]||(i[1]=S=>g.value.email=S),placeholder:"请输入新邮箱地址"},null,8,["modelValue"])]),_:1}),e(_,{label:"验证码",prop:"code"},{default:t(()=>[l("div",Be,[e(d,{modelValue:g.value.code,"onUpdate:modelValue":i[2]||(i[2]=S=>g.value.code=S),placeholder:"请输入验证码"},null,8,["modelValue"]),e(c,{type:"primary",disabled:a.value>0,onClick:o},{default:t(()=>[m($(a.value>0?`${a.value}秒后重试`:"获取验证码"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},Te=B(Fe,[["__scopeId","data-v-30d57c70"]]),Ae={class:"vip-card"},Ue={class:"vip-card__content"},ze={class:"vip-card__badge"},he={class:"vip-card__benefits"},Me={class:"benefit-item"},Pe={class:"benefit-item"},qe={class:"benefit-item"},De={class:"label-with-ad"},Re={__name:"VipCard",setup(y){const v=()=>{window.open("https://api.ezworkapi.top","_blank")};return(g,a)=>{const o=s("StarFilled"),n=s("el-icon"),p=s("Check"),i=s("el-tag");return b(),w("div",Ae,[a[7]||(a[7]=l("div",{class:"vip-card__corner vip-card__corner--tl"},null,-1)),a[8]||(a[8]=l("div",{class:"vip-card__corner vip-card__corner--tr"},null,-1)),a[9]||(a[9]=l("div",{class:"vip-card__corner vip-card__corner--bl"},null,-1)),a[10]||(a[10]=l("div",{class:"vip-card__corner vip-card__corner--br"},null,-1)),l("div",Ue,[l("div",ze,[e(n,{class:"crown-icon"},{default:t(()=>[e(o)]),_:1}),a[0]||(a[0]=l("span",null,"VIP",-1))]),a[5]||(a[5]=l("h3",{class:"vip-card__title"},"尊享会员特权",-1)),a[6]||(a[6]=l("p",{class:"vip-card__desc"},"您已成为DocTranslator会员",-1)),l("div",he,[l("div",Me,[e(n,{size:"20"},{default:t(()=>[e(p)]),_:1}),a[1]||(a[1]=l("span",null,"专属高速翻译通道",-1))]),l("div",Pe,[e(n,{size:"20"},{default:t(()=>[e(p)]),_:1}),a[2]||(a[2]=l("span",null,"优先技术支持",-1))]),l("div",qe,[e(n,{size:"20"},{default:t(()=>[e(p)]),_:1}),a[3]||(a[3]=l("span",null,"更高翻译质量",-1))]),l("span",De,[e(i,{size:"mini",type:"warning",style:{"margin-left":"8px",cursor:"pointer","font-size":"medium"},onClick:v},{default:t(()=>a[4]||(a[4]=[m(" 🔥 推荐使用在线api中转站 ",-1)])),_:1,__:[4]})])])])])}}},W=B(Re,[["__scopeId","data-v-8e50f371"]]),Ne={class:"settings-container"},Oe={class:"label-with-ad"},Ke={class:"form-actions"},Ge={__name:"AiTranslationSettings",setup(y){const v=H(),g=R(),a=I(null),o=I({provider:"openai",api_url:"",api_key:""}),n=C(()=>g.isVip),p=I(!1),i=I(!1),c=I(""),_=C(()=>c.value==="success"?"success":c.value==="fail"?"danger":""),f=()=>{window.open("https://api.ezworkapi.top","_blank")},r={provider:[{required:!0,message:"请选择服务商",trigger:"change"}],api_url:[{required:!0,message:"请输入API地址",trigger:"blur"}],api_key:[{required:!0,message:"请输入API Key",trigger:"blur"}]},d=C(()=>o.provider==="openai"&&o.api_url&&o.api_key),V=async()=>{if(d.value)try{i.value=!0,c.value="";const x=await ie({api_url:o.api_url,api_key:o.api_key});c.value=x.code===200?"success":"fail"}catch{c.value="fail"}finally{i.value=!1}},S=async()=>{try{await a.value.validate(),p.value=!0,v.updateAIServerSettings({api_url:o.value.api_url,api_key:o.value.api_key}),L.success("保存成功!")}catch(x){console.error("表单验证失败:",x)}finally{p.value=!1}};return N(()=>{o.value={provider:"openai",api_url:v.aiServer.api_url,api_key:v.aiServer.api_key}}),(x,u)=>{const z=s("el-radio-button"),M=s("el-radio-group"),T=s("el-form-item"),X=s("el-tag"),O=s("el-input"),K=s("el-button"),G=s("el-icon"),Y=s("el-form");return b(),w("div",Ne,[n.value?(b(),A(W,{key:0})):(b(),A(Y,{key:1,ref_key:"formRef",ref:a,model:o.value,rules:r,"label-width":"120px","label-position":"top"},{default:t(()=>[e(T,{label:"服务商",prop:"provider"},{default:t(()=>[e(M,{modelValue:o.value.provider,"onUpdate:modelValue":u[0]||(u[0]=U=>o.value.provider=U)},{default:t(()=>[e(z,{label:"openai",disabled:n.value},{default:t(()=>u[3]||(u[3]=[m("OpenAI",-1)])),_:1,__:[3]},8,["disabled"]),e(z,{label:"member",disabled:!n.value},{default:t(()=>u[4]||(u[4]=[m("DocTranslator 会员",-1)])),_:1,__:[4]},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),o.value.provider==="openai"?(b(),w(h,{key:0},[e(T,{prop:"api_url"},{label:t(()=>[l("span",Oe,[u[6]||(u[6]=m(" API地址 ",-1)),e(X,{size:"mini",type:"warning",style:{"margin-left":"8px",cursor:"pointer","font-size":"medium"},onClick:f},{default:t(()=>u[5]||(u[5]=[m(" 🔥 推荐使用在线api中转站 ",-1)])),_:1,__:[5]})])]),default:t(()=>[e(O,{modelValue:o.value.api_url,"onUpdate:modelValue":u[1]||(u[1]=U=>o.value.api_url=U),placeholder:"https://api.ezworkapi.top",clearable:""},null,8,["modelValue"])]),_:1}),e(T,{label:"API密钥",prop:"api_key"},{default:t(()=>[e(O,{modelValue:o.value.api_key,"onUpdate:modelValue":u[2]||(u[2]=U=>o.value.api_key=U),placeholder:"输入您的API Key","show-password":"",clearable:""},null,8,["modelValue"])]),_:1})],64)):F("",!0),e(T,null,{default:t(()=>[l("div",Ke,[e(K,{type:"primary",onClick:S,loading:p.value},{default:t(()=>u[7]||(u[7]=[m(" 保存设置 ",-1)])),_:1,__:[7]},8,["loading"]),e(K,{type:_.value,onClick:V,loading:i.value,disabled:!d.value},{default:t(()=>[c.value==="success"?(b(),w(h,{key:0},[e(G,{class:"success-icon"},{default:t(()=>[e(k(le))]),_:1}),u[8]||(u[8]=m(" 连接正常 ",-1))],64)):c.value==="fail"?(b(),w(h,{key:1},[e(G,{class:"error-icon"},{default:t(()=>[e(k(oe))]),_:1}),u[9]||(u[9]=m(" 连接失败 ",-1))],64)):(b(),w(h,{key:2},[m(" 检查连接 ")],64))]),_:1},8,["type","loading","disabled"])])]),_:1})]),_:1},8,["model"]))])}}},je=B(Ge,[["__scopeId","data-v-1c770a5c"]]),Ee={__name:"MachineTranslationSettings",setup(y){const v=R(),g=C(()=>v.isVip),a=H(),o=I(null),n=I({});N(()=>{n.value={provider:"baidu",app_id:a.baidu.app_id,app_key:a.baidu.app_key}});const p={provider:[{required:!0,message:"请选择翻译引擎",trigger:"change"}],app_id:[{required:!0,message:"请输入App ID",trigger:"blur"}],app_key:[{required:!0,message:"请输入App Key",trigger:"blur"}]},i=async()=>{try{await o.value.validate(),a.updateBaiduSettings({app_id:n.value.app_id,app_key:n.value.app_key}),L.success("保存成功!")}catch(c){console.error("表单验证失败:",c)}};return(c,_)=>{const f=s("el-option"),r=s("el-select"),d=s("el-form-item"),V=s("el-input"),S=s("el-button"),x=s("el-form");return g.value?(b(),A(W,{key:0})):(b(),A(x,{key:1,ref_key:"formRef",ref:o,model:n.value,rules:p,"label-width":"120px","label-position":"top"},{default:t(()=>[e(d,{label:"翻译引擎",prop:"provider"},{default:t(()=>[e(r,{modelValue:n.value.provider,"onUpdate:modelValue":_[0]||(_[0]=u=>n.value.provider=u),placeholder:"选择翻译引擎"},{default:t(()=>[e(f,{label:"百度翻译",value:"baidu"}),e(f,{label:"有道翻译",value:"youdao"}),e(f,{label:"Google翻译",value:"google"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"App ID",prop:"app_id"},{default:t(()=>[e(V,{modelValue:n.value.app_id,"onUpdate:modelValue":_[1]||(_[1]=u=>n.value.app_id=u),placeholder:"输入应用ID",clearable:""},null,8,["modelValue"])]),_:1}),e(d,{label:"App Key",prop:"app_key"},{default:t(()=>[e(V,{modelValue:n.value.app_key,"onUpdate:modelValue":_[2]||(_[2]=u=>n.value.app_key=u),placeholder:"输入应用密钥","show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),e(d,null,{default:t(()=>[e(S,{type:"primary",onClick:i},{default:t(()=>_[3]||(_[3]=[m("保存设置",-1)])),_:1,__:[3]})]),_:1})]),_:1},8,["model"]))}}},Je=B(Ee,[["__scopeId","data-v-e21ff7e3"]]),He={class:"translation-settings-container"},Le={__name:"TranslationSettings",setup(y){const v=I("ai");return(g,a)=>{const o=s("el-tab-pane"),n=s("el-tabs");return b(),w("div",He,[e(n,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=p=>v.value=p),class:"settings-tabs"},{default:t(()=>[e(o,{label:"AI翻译",name:"ai"},{default:t(()=>[e(je,{ref:"aiSettingsForm"},null,512)]),_:1}),e(o,{label:"机器翻译",name:"machine"},{default:t(()=>[e(Je,{ref:"machineSettingsForm"},null,512)]),_:1})]),_:1},8,["modelValue"])])}}},Qe=B(Le,[["__scopeId","data-v-245cf9d8"]]),We={class:"profile-content"},Xe={class:"avatar-container"},Ye={key:0,class:"vip-badge"},Ze={class:"user-details"},et={class:"name-row"},tt={class:"username"},at={key:0,class:"vip-tag"},lt={class:"meta-row"},ot={class:"meta-item"},st={class:"meta-item"},nt={__name:"UserCard",props:{userInfo:{type:Object,required:!0,default:()=>({email:"",level:"",storage:0,create_at:""})}},setup(y){return(v,g)=>{const a=s("el-avatar"),o=s("CrownFilled"),n=s("el-icon"),p=s("StarFilled"),i=s("Message"),c=s("Calendar"),_=s("el-card");return b(),A(_,{class:D(["user-profile-card",{"vip-user":y.userInfo.level==="vip"}])},{default:t(()=>[l("div",We,[l("div",Xe,[e(a,{size:72,src:y.userInfo.avatar||v.defaultAvatar},null,8,["src"]),y.userInfo.level==="vip"?(b(),w("div",Ye,[e(n,null,{default:t(()=>[e(o)]),_:1})])):F("",!0)]),l("div",Ze,[l("div",et,[l("h3",tt,$(y.userInfo.username),1),y.userInfo.level==="vip"?(b(),w("span",at,[e(n,null,{default:t(()=>[e(p)]),_:1}),g[0]||(g[0]=m(" 尊享会员 ",-1))])):F("",!0)]),l("div",lt,[l("div",ot,[e(n,{class:"meta-icon"},{default:t(()=>[e(i)]),_:1}),l("span",null,$(y.userInfo.email),1)]),l("div",st,[e(n,{class:"meta-icon"},{default:t(()=>[e(c)]),_:1}),l("span",null,"注册于 "+$(k(Q)(y.userInfo.created_at)||"未知时间"),1)])])])])]),_:1},8,["class"])}}},rt=B(nt,[["__scopeId","data-v-971046dc"]]),it={class:"personal-center-container"},ut={class:"scrollable-content-area"},dt={class:"main-content-wrapper"},_t={class:"content-card-wrapper"},pt={__name:"index",setup(y){const v=R(),g=J(),a=I("basic"),o=I({email:"",level:"",storage:0,total_storage:1073741824,created_at:""}),n=I({used_storage:0,total_storage:1073741824,percentage:0}),p=I({server:"openai",api_url:"https://api.openai.com",api_key:"",model:"gpt-3.5-turbo",backup_model:"",langs:["中文","英语"],type:["trans_text","trans_text_only","trans_text_only_new"],prompt:"你是一个文档翻译助手，请将以下文本、单词或短语直接翻译成{target_lang}，不返回原文本。如果文本中包含{target_lang}文本、特殊名词（比如邮箱、品牌名、单位名词如mm、px、℃等）、无法翻译等特殊情况，请直接返回原文而无需解释原因。遇到无法翻译的文本直接返回原内容。保留多余空格。",threads:10,comparison_id:"",prompt_id:"",doc2x_flag:"N",doc2x_secret_key:"",scanned:!1,origin_lang:""});N(async()=>{try{const r=await se();r.code===200&&(o.value={...r.data,storage:r.data.storage||0,total_storage:r.data.total_storage||1073741824});const d=await ne();d.code===200&&(n.value={used_storage:parseInt(d.data.used_storage),total_storage:parseInt(d.data.total_storage),percentage:parseFloat(d.data.percentage)},o.value.storage=n.value.used_storage,o.value.total_storage=n.value.total_storage)}catch(r){console.error("获取用户信息失败:",r),o.value=v.userInfo}});const i=r=>{a.value=r},c=r=>{console.log("模拟更新用户信息:",r),o.value={...o.value,...r}},_=()=>{g.push("/reset")},f=r=>{console.log("保存翻译设置:",r),localStorage.setItem("api_url",r.api_url),localStorage.setItem("api_key",r.api_key),localStorage.setItem("model",r.model),localStorage.setItem("backup_model",r.backup_model),localStorage.setItem("langs",JSON.stringify(r.langs)),localStorage.setItem("type",JSON.stringify(r.type)),localStorage.setItem("prompt",r.prompt),localStorage.setItem("threads",r.threads),localStorage.setItem("comparison_id",r.comparison_id),localStorage.setItem("prompt_id",r.prompt_id),localStorage.setItem("doc2x_flag",r.doc2x_flag),localStorage.setItem("doc2x_secret_key",r.doc2x_secret_key),p.value=r};return(r,d)=>{const V=s("el-icon"),S=s("el-menu-item"),x=s("el-menu"),u=s("el-tab-pane"),z=s("el-tabs");s("el-avatar"),s("el-tag");const M=s("el-card");return b(),w("div",it,[l("div",ut,[l("div",dt,[e(x,{class:"side-nav","default-active":a.value,onSelect:i},{default:t(()=>[e(S,{index:"basic"},{title:t(()=>[e(V,null,{default:t(()=>[e(k(j))]),_:1}),d[1]||(d[1]=l("span",null,"基本信息",-1))]),_:1}),e(S,{index:"security"},{title:t(()=>[e(V,null,{default:t(()=>[e(k(E))]),_:1}),d[2]||(d[2]=l("span",null,"账号安全",-1))]),_:1})]),_:1},8,["default-active"]),l("div",_t,[e(z,{modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=T=>a.value=T),class:"mobile-tabs"},{default:t(()=>[e(u,{name:"basic"},{label:t(()=>[l("span",null,[e(V,null,{default:t(()=>[e(k(j))]),_:1}),d[3]||(d[3]=m(" 基本信息",-1))])]),_:1}),e(u,{name:"security"},{label:t(()=>[l("span",null,[e(V,null,{default:t(()=>[e(k(E))]),_:1}),d[4]||(d[4]=m(" 账号安全",-1))])]),_:1}),e(u,{name:"translation"},{label:t(()=>[l("span",null,[e(V,null,{default:t(()=>[e(k(re))]),_:1}),d[5]||(d[5]=m(" 翻译设置",-1))])]),_:1})]),_:1},8,["modelValue"]),F("",!0),e(rt,{userInfo:o.value},null,8,["userInfo"]),e(M,{class:"content-card",shadow:"never"},{default:t(()=>[P(e(Ve,{userInfo:o.value,onUpdateInfo:c},null,8,["userInfo"]),[[q,a.value==="basic"]]),P(e(Te,{email:o.value.email,onChangePassword:_},null,8,["email"]),[[q,a.value==="security"]]),P(e(Qe,{settings:p.value,onSaveSettings:f},null,8,["settings"]),[[q,a.value==="translation"]])]),_:1})])])]),F("",!0)])}}},gt=B(pt,[["__scopeId","data-v-c9895a2b"]]);export{gt as default};
