import{_ as x,u as y,K as N,r as i,Y as B,i as s,o as C,c as F,a as n,av as T,k as o,w as a,aw as U,m as E,C as R,t as q,ax as K,E as f}from"./index-DFHtbIWh.js";const L={class:"auth-page"},S={class:"auth-container"},$={__name:"index",setup(z){const g=y(),h=N(),u=i("login"),d=i(null),r=i(!1),t=B({email:"",password:"",tenant_code:"TENANT_0001"}),v={email:[{required:!0,message:"请填写邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:"blur"}],tenant_code:[{required:!0,message:"请填写租户代码",trigger:"blur"}]},m=async()=>{d.value.validate(async p=>{if(p){r.value=!0;try{const e=await K(t);e.code===200?(g.updateToken(e.data.token),h.push({name:"home"})):f.error(e.message)}catch(e){console.error("登录失败:",e)}finally{r.value=!1}}else f.error("请正确填写表单")})};return(p,e)=>{const _=s("el-input"),c=s("el-form-item"),V=s("el-button"),b=s("el-form"),w=s("el-tab-pane"),k=s("el-tabs");return C(),F("div",L,[n("div",S,[e[4]||(e[4]=n("div",{class:"auth-header"},[n("img",{src:T,alt:"Logo",class:"auth-logo"}),n("h1",{class:"auth-title"},"欢迎回来"),n("p",{class:"auth-subtitle"},"请登录以继续")],-1)),o(k,{modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=l=>u.value=l),stretch:"",class:"auth-tabs"},{default:a(()=>[o(w,{label:"登录",name:"login"},{default:a(()=>[o(b,{model:t,ref_key:"loginFormRef",ref:d,rules:v,onKeyup:U(m,["enter"])},{default:a(()=>[o(c,{prop:"email"},{default:a(()=>[o(_,{modelValue:t.email,"onUpdate:modelValue":e[0]||(e[0]=l=>t.email=l),placeholder:"邮箱","prefix-icon":"el-icon-message"},null,8,["modelValue"])]),_:1}),o(c,{prop:"password"},{default:a(()=>[o(_,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=l=>t.password=l),type:"password","show-password":"",placeholder:"密码","prefix-icon":"el-icon-lock"},null,8,["modelValue"])]),_:1}),E("",!0),o(c,{class:"center"},{default:a(()=>[o(V,{type:"primary",size:"large",class:"auth-btn",onClick:m,loading:r.value},{default:a(()=>[R(q(r.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"])])])}}},I=x($,[["__scopeId","data-v-52e2ebf0"]]);export{I as default};
